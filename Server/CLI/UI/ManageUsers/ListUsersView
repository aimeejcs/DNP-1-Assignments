using RepositoryContracts;

namespace CLI.UI;

public class ListUsersView
{
    private readonly IUserRepository _users;

    public ListUsersView(IUserRepository users) => _users = users;

    public Task ShowAsync()
    {
        var all = _users.GetManyAsync().ToList();
        if (all.Count == 0)
        {
            Console.WriteLine("(no users)");
            return Task.CompletedTask;
        }

        Console.WriteLine("\nID\tUsername");
        foreach (var u in all)
            Console.WriteLine($"{u.Id}\t{u.UserName}");

        return Task.CompletedTask;
    }
}
